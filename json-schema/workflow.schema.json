{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "version": "0.0.1",
  "title": "Workflow",
  "type": "object",
  "properties": {
    "schemaVersion": {
      "type": "string",
      "default": "0.0.1"
    },
    "tasks": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Task"
      },
      "description": "Worfklow tasks."
    },
    "name": {
      "type": "string",
      "description": "The name of the workflow."
    },
    "parameters": {
      "type": "object",
      "additionalProperties": {
        "type": "string"
      },
      "description": "Optional parameters for the workflow."
    },
    "schedule": {
      "type": "string",
      "description": "Optional schedule in cron format."
    },
    "timezone": {
      "type": "string",
      "description": "Timezone for the schedule."
    }
  },
  "required": [
    "tasks",
    "name"
  ],
  "definitions": {
    "Task": {
      "type": "object",
      "properties": {
        "input_uri": {
          "type": "string",
          "description": "The URI of the input file."
        },
        "runtime_environment_name": {
          "type": "string",
          "description": "Name of the runtime environment."
        },
        "runtime_environment_parameters": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "description": "Parameters for the runtime environment."
        },
        "output_formats": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "parameters": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "description": "Task-specific parameters."
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Tags for categorizing the job."
        },
        "name": {
          "type": "string",
          "description": "Name of the job."
        },
        "compute_type": {
          "type": "string",
          "description": "Type of compute resource to use."
        },
        "package_input_folder": {
          "type": "boolean",
          "description": "Whether to package the input folder."
        },
        "depends_on": {
          "type": "array",
          "description": "DAG node IDs of tasks this task depends on (upstream dependencies).",
          "items": {
            "type": "object",
            "properties": {
              "node_id": {
                "type": "string"
              }
            },
            "required": [
              "node_id"
            ]
          }
        },
        "node_id": {
          "type": "string",
          "description": "DAG node ID of this task."
        }
      },
      "required": [
        "input_uri",
        "name",
        "node_id",
        "depends_on"
      ]
    }
  }
}
